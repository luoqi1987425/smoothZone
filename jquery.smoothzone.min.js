SmoothZone={};SmoothZone.Class=function(prototype){var constractor=function(){return this.initialize?this.initialize.apply(this,arguments)||this:this;};constractor.prototype=prototype;SmoothZone.Extend(constractor.prototype,SmoothZone.Class.Methods);return constractor;};SmoothZone.Class.Methods={};SmoothZone.Extend=function(destination,source,overwrite){if(!destination||!source)return destination;for(var field in source){if(destination[field]===source[field])continue;if(overwrite===false&&destination.hasOwnProperty(field))continue;destination[field]=source[field];}return destination;};SmoothZone.Event=function(obj,strFunc){var args=[];if(!obj)obj=window;for(var i=2;i<arguments.length;i++)args.push(arguments[i]);return function(){return obj[strFunc].apply(obj,args);};};SmoothZone.Callback=function(obj,strFunc){if(!obj)obj=window;return function(){return obj[strFunc].apply(obj,arguments);};};(function(){var Core=SmoothZone.Class({_config:null,_$:null,_items:null,_display:null,_tmpNext:null,initialize:function($,config){this._items=new Array();this._$=$;this._initConfig(config);this._start();},getVersion:function(){return"1.0.0";},add:function($new){if(this._config.mode==="circle"){throw new Exception("sorry add function only support static mode");}var firstItem=this._display.getFirst();var item=new SmoothZone.Item($new,null);firstItem.setNext(item);this._items.push(item);this._displayNext();},_initConfig:function(config){this._config={speed:3000,number:5,effect:'default',mode:'circle'};SmoothZone.Extend(this._config,config,true);},_start:function(){this._parseItems();this._initShow();this._run();},_parseItems:function(){var hackThis=this;this._$.children().each(function(){hackThis._insertLink.apply(hackThis,[$(this)]);});if(this._config.mode=="circle"){this._items[0].setNext(this._items[(this._items.length-1)]);}if(this._config.number>this._items.length){this._config.number=this._items.length;}},_insertLink:function($item){var item=new SmoothZone.Item($item,this._tmpNext);this._items.push(item);this._tmpNext=item;},_initShow:function(){for(var i=0;i<this._items.length;i++){if(i>=this._config.number){this._items[i].get$().remove();}}},_run:function(){this._display=new SmoothZone.Display(this._$,this._items[0],this._items[(this._config.number-1)],this._config);switch(this._config.mode){case"circle":setInterval(SmoothZone.Callback(this,"_displayNext"),this._config.speed);break;case"static":break;default:throw new Exception("no such mode");break;}},_displayNext:function(){this._display.next();}});SmoothZone.Core=Core;})();(function(){var Display=SmoothZone.Class({_$:null,_first:null,_last:null,_config:null,initialize:function($,first,last,config){this._$=$;this._config=config;this._first=first;this._last=last;},getFirst:function(){return this._first;},next:function(){if(this._last==this._first.getNext()){return true;}this._add(this._first.getNext());this._remove(this._last);this._upgrade(this._first.getNext(),this._last.getNext())},_upgrade:function(first,last){this._first=first;this._last=last;},_add:function(newItem){var $item=newItem.get$();this._show($item);},_remove:function(item){item.get$().remove();},_show:function($item){switch(this._config.effect){case"default":this._showDefault($item);break;case"fade":this._showFade($item);break;case"slice":this._showSlice($item);break;default:throw new Exception("no such effect");}},_showDefault:function($item){this._$.prepend($item);},_showFade:function($item){$item.css("display","none");this._$.prepend($item);$item.animate({opacity:"show"},1500);},_showSlice:function($item){$item.css("display","none");this._$.prepend($item);$item.show("fast");}});SmoothZone.Display=Display;})();(function(){var Item=SmoothZone.Class({_next:null,_$:null,initialize:function($,next){this._$=$;this._next=next;},setNext:function(item){this._next=item;},getNext:function(item){return this._next;},get$:function(){return this._$;}});SmoothZone.Item=Item;})();$.fn.smoothzone=function(config){var rtn=new SmoothZone.Core(this,config);return rtn;};