<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="JS/core.js"></script>
<script type="text/javascript" src="JS/observable.js"></script>
<title>Demo</title>


</head>

<body>

<div class="body">
	
	
</div>


<script>
	
var Magazine = new JS.Class({
    include: JS.Observable,

    publishIssue: function() {
        this.notifyObservers( Magazine.EVENT_PUBLISH_ISSUE ,  "issue" );
    }
});

JS.extend( Magazine , {
	EVENT_PUBLISH_ISSUE : "event_publish_issue"
});



var Reader = new JS.Class({

	magazineListener : function( event , issue ){
		switch( event ){
			case Magazine.EVENT_PUBLISH_ISSUE:
				this._onMagazinePublish(issue);	
			break;
			
			default:
				throw new Exception("no such event");

		}
	},
	_onMagazinePublish : function( issue ){
		alert("magazine publish");
	}


});

var person	= new Reader();
var mag		= new Magazine();
mag.addObserver(person.method('magazineListener'));
mag.publishIssue();


</script>

</body>
</html>
